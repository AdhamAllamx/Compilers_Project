# Milestone 2 - Syntax Analyzer (Parser)

## Overview

This project implements a **Syntax Analyzer (Parser)** in Python using **PLY (Python Lex-Yacc)**.  
The parser reads the token streams generated by the Lexical Analyzer (**Milestone 1**) and verifies that they conform to the grammar of the language.  
If the syntax is valid, it generates an **Abstract Syntax Tree (AST)** representing the structure of the input code.

Additionally, as an enhancement, the parser now supports **subtraction (-)**, **multiplication (*)**, and **division (/)** operations in addition to the required addition (+).

---

## Files Included in Submission

- `Parser.py`: Main Python code containing the AST node classes, grammar rules, parser implementation, and lexer adapter.
- `Lexer.py`: The lexical analyzer code from Milestone 1 (used to tokenize input).
- `sample_input.txt`: A sample text file containing multiple lines of test code.
- `parsetab.py`: Auto-generated PLY parser table (do not edit manually).
- `README.md`: This file.

---

# How to run the code

1. Ensure you have Python 3.11+ installed.
2. Install PLY if not already installed:
   ```bash
   pip install -r requirements.txt
   ```
3. Run the parser with the sample input file:
   ```bash
   python Parser.py
   ```
4. The output will display the token stream and the generated AST, along with any syntax errors encountered during parsing.

---

## How It Works

The core components are:

### ðŸ”¹ `Parser` (PLY-based):

- **Input**: A token stream from `Lexer.py`.
- **Output**: An **AST** if the input conforms to the grammar; otherwise, a `SyntaxError`.
- **Returns**: An AST representing the program's structure.
- **Prints**: The token stream and the final AST for review.

---

## Language Features Supported

This language supports:

1. **Variable Declarations**
   - Example: `int x;` or `string name;`

2. **Variable Assignments**
   - Example: `x = 5;` or `name = "Alice";`

3. **Expressions**  
   - **Addition (`+`) [Required]**
   - **Subtraction (`-`), Multiplication (`*`), Division (`/`) [Enhanced Feature]**

   Example:
   - `y = x + 3;`
   - `z = x / y;`
   - `greeting = "Hello" + " World!";`

4. **Supported Data Types**
   - `int`
   - `string`

---

## Grammar Definition

**Note**: Grammar extended to support subtraction, multiplication, and division.

program      ::= stmt_list
stmt_list    ::= stmt stmt_list | stmt
stmt         ::= var_decl SEMI | assignment SEMI
var_decl     ::= type ID
type         ::= INT | STRING_TYPE
assignment   ::= ID EQUALS expr
expr         ::= expr ADDITION term
              | expr SUBTRACTION term
              | expr MULTIPLICATION term
              | expr DIVISION term
              | term
term         ::= NUM | ID | STRING



-----------------------------------------------------

# Abstract Syntax Tree (AST) Node Types

- **Program**: Root node containing all statements.
- **VarDecl**: Variable declaration (type and name).
- **Assignment**: Variable assignment (name and expression).
- **BinOp**: Binary operation (e.g., addition,subtraction,multiplication,division).
- **Num**: Numeric constant.
- **Str**: String constant.
- **Var**: Variable reference.

--------------------------------------------------

## Implementation Details

### AST Node Classes

Classes such as `Program`, `VarDecl`, `Assignment`, `BinOp`, are defined to structure the AST.

### PLY Grammar Rules

Implements the grammar rules described above to parse token streams.

### Lexer Adapter

Converts the token format from `Lexer.py` to the format expected by PLY.

### Error Handling

If invalid syntax is detected, a `SyntaxError` is raised with a detailed message.

--------------------------------------------------

## Test File
```
The `sample_input.txt` file contains valid test cases, including:

int x;
int y;
int z;
string email;
string name;
string greeting;

x = 5;
y = x + 3;
z = x / y;
email = "adham.allam.x@gmail.com";
name = "Alice";
greeting = "Hello" + " World!";
```

------------------------------------------------------

## Example output 
```
- Lexical Analyzer Tokens Stream:

['KW(int)', 'ID(x)', ';']
['KW(int)', 'ID(y)', ';']
['KW(int)', 'ID(z)', ';']
['KW(string)', 'ID(email)', ';']
['KW(string)', 'ID(name)', ';']
['KW(string)', 'ID(greeting)', ';']
['ID(x)', '=', 'NUM(5)', ';']
['ID(y)', '=', 'ID(x)', '+', 'NUM(3)', ';']
['ID(z)', '=', 'ID(x)', '/', 'ID(y)', ';']
['ID(email)', '=', 'STRING("adham.allam.x@gmail.com")', ';']
['ID(name)', '=', 'STRING("Alice")', ';']
['ID(greeting)', '=', 'STRING("Hello")', '+', 'STRING(" World!")', ';']
```

- ### AST from Parser:

```
('program',
   ('var_decl', 'int', 'x'),
   ('var_decl', 'int', 'y'),
   ('var_decl', 'int', 'z'),
   ('var_decl', 'string', 'email'),
   ('var_decl', 'string', 'name'),
   ('var_decl', 'string', 'greeting'),
   ('assign', 'x', ('num', '5')),
   ('assign', 'y', ('+', ('var', 'x'), ('num', '3'))),
   ('assign', 'z', ('/', ('var', 'x'), ('var', 'y'))),
   ('assign', 'email', ('str', '"adham.allam.x@gmail.com"')),
   ('assign', 'name', ('str', '"Alice"')),
   ('assign', 'greeting', ('+', ('str', '"Hello"'), ('str', '" World!"')))
)
```

- ### Visualized AST Tree
```
program
  var_decl
    int
    x

  var_decl
    int
    y

  var_decl
    int
    z

  var_decl
    string
    email

  var_decl
    string
    name

  var_decl
    string
    greeting


  assign
    x
    num
      5

  assign
    y
    +
      var
        x
      num
        3

  assign
    z
    /
      var
        x
      var
        y

  assign
    email
    str
      "adham.allam.x@gmail.com"

  assign
    name
    str
      "Alice"

  assign
    greeting
    +
      str
        "Hello"
      str
        " World!"
```
   - ## AST Node Types and Structure
   1. ### Program Node
      ```
      Root: program
      Purpose: Contains all statements in the program
      Children: List of variable declarations and assignments
      ```
   2. ### Variable Declaration Nodes
   ```
      Format: ('var_decl', type, variable_name)
      Examples:
      int x; â†’ ('var_decl', 'int', 'x')
      string email; â†’ ('var_decl', 'string', 'email')
   ```
   3. ### Assignment Nodes
   ```
      Format: ('assign', variable_name, expression)
      Examples:
      x = 5; â†’ ('assign', 'x', ('num', '5'))
      y = x + 3; â†’ ('assign', 'y', ('+', ('var', 'x'), ('num', '3')))
   ```
   4. ### Expression Nodes
      ### Binary Operations
      ```

         Format: (operator, left_operand, right_operand)
         Supported Operators: +, -, *, /
         Examples:

         x + 3 â†’ ('+', ('var', 'x'), ('num', '3'))
         x / y â†’ ('/', ('var', 'x'), ('var', 'y'))
      ``


     ### Terminal Nodes
      ```
         `Numbers: ('num', value) - e.g., ('num', '5')
         Strings: ('str', value) - e.g., ('str', '"Alice"')
         Variables: ('var', name) - e.g., ('var', 'x')`
      ```
   - ## Detailed Analysis
      - ### Variable Declarations Section
      ```
         var_decl
         int
         x

         var_decl
         int
         y

         var_decl
         int
         z

         var_decl
         string
         email

         var_decl
         string
         name

         var_decl
         string
         greeting

        - 6 variable declarations total
        - 3 integer variables: x, y, z
        - 3 string variables: email, name, greeting
       ```
   - ## Assignment Statements Section
      - ### Simple Assignment
      ```
         assign
         x
         num
            5

         Source: x = 5;
         Meaning: Assign literal value 5 to variable x
      ```
      - ### Binary Operation Assignment
         ```
         assign
         y
         +
            var
               x
            num
               3

         Source: y = x + 3;
         Meaning: Add variable x and literal 3, assign result to y
         ```
      - ### Variable-to-Variable Operation
         ```
         assign
         z
         /
            var
               x
            var
               y

         Source: z = x / y;
         Meaning: Divide variable x by variable y, assign result to z
         ```
      - ### String Assignment 
         ```
         assign
         email
         str
            "adham.allam.x@gmail.com"

         Source: email = "adham.allam.x@gmail.com";
         Meaning: Assign string literal to email variable
         ```
      - ### String Concatenation 
         ```
         assign
         greeting
         +
            str
               "Hello"
            str
               " World!"
         Source: greeting = "Hello" + " World!";
         Meaning: Concatenate two string literals using + operator 
         ```




------------------------------------------------------

## Tools & Libraries

1. PLY (Python Lex-Yacc): For parsing.

2. Python 3.11+

------------------------------------------------------

## Notes
1. Enhancement: Subtraction (-), multiplication (*), and division (/) were added beyond the minimum required feature set.
2. This demonstrates advanced understanding and extensibility of the parser design
